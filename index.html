<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Live Flight Tracker</title>

        <!-- Open Layers -->
        <link rel="stylesheet" href="https://openlayers.org/en/latest/css/ol.css" type="text/css">
        <script src="https://openlayers.org/en/latest/build/ol.js"></script>

    </head>
    <body>

        <div id="map" class="map" style="border: 1px solid black; width: 100%;height:85vh;"></div>
        <button onclick="updateMap()">Refresh Map</button>
    
        <script>

            // Initialize Vector Layer
            var vectorLayer = new ol.layer.Vector({
                source: null
            });

            // Initialize Map
            var map = new ol.Map({
                layers: [
                    new ol.layer.Tile({
                        source: new ol.source.OSM()
                    }),
                    vectorLayer,
                ],
                target: 'map',
                view: new ol.View({
                    center: [0, 0],
                    zoom: 2
                })
            });

            // Function: Update Map
            function updateMap() {
                fetch('.')
                    .then(response => {

                        // Initialize features arrays
                        var features = new Array(1);

                        // Add a feature in Lon,Lat of 0,0
                        features[0] = new ol.Feature(
                                        new ol.geom.Point(ol.proj.fromLonLat([0, 0])));
    
                        // Set style of feature plane
                        features[0].setStyle(
                            new ol.style.Style({
                                image: new ol.style.Icon({
                                    scale : 0.08,
                                    src: 'plane.png',
                                    rotation: 0,
                                }),
                            })
                        );
                        
                        // Set new features as source to vector layer
                        vectorLayer.setSource(new ol.source.Vector({
                            features: features,
                        }));

                    });
            }

            

            

        </script>
    </body>
</html>